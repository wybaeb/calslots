#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è —è—Ä–ª—ã–∫–∞ Calendar Slots –Ω–∞ —Ä–∞–±–æ—á–µ–º —Å—Ç–æ–ª–µ

echo "üóìÔ∏è  –†–∞–∑–º–µ—â–µ–Ω–∏–µ —è—Ä–ª—ã–∫–∞ Calendar Slots –Ω–∞ —Ä–∞–±–æ—á–µ–º —Å—Ç–æ–ª–µ"
echo "====================================================="

# –ü–æ–ª—É—á–∞–µ–º –ø—É—Ç—å –∫ —Ä–∞–±–æ—á–µ–º—É —Å—Ç–æ–ª—É
DESKTOP_PATH="$HOME/Desktop"

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Ä–∞–±–æ—á–∏–π —Å—Ç–æ–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
if [ ! -d "$DESKTOP_PATH" ]; then
    echo "‚ùå –†–∞–±–æ—á–∏–π —Å—Ç–æ–ª –Ω–µ –Ω–∞–π–¥–µ–Ω –ø–æ –ø—É—Ç–∏: $DESKTOP_PATH"
    exit 1
fi

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ —Ñ–∞–π–ª–∞ show_slots.sh
if [ ! -f "show_slots.sh" ]; then
    echo "‚ùå –§–∞–π–ª show_slots.sh –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ —Ç–µ–∫—É—â–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏"
    echo "üí° –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞"
    exit 1
fi

# –°–æ–∑–¥–∞–µ–º –∫—Ä–∞—Å–∏–≤–æ–µ –∏–º—è –¥–ª—è —è—Ä–ª—ã–∫–∞
SHORTCUT_NAME="üìÖ Calendar Slots"
SHORTCUT_PATH="$DESKTOP_PATH/$SHORTCUT_NAME"

# –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–∏–π –ø—É—Ç—å –∫ –ø—Ä–æ–µ–∫—Ç—É
CURRENT_DIR="$(pwd)"

# –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –ø—É—Ç–µ–º
echo "üìÇ –°–æ–∑–¥–∞—é —è—Ä–ª—ã–∫ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –ø—É—Ç–µ–º –∫ –ø—Ä–æ–µ–∫—Ç—É..."
sed "s|PROJECT_DIR=\"/Users/admin/Sites/calslots\"|PROJECT_DIR=\"$CURRENT_DIR\"|g" show_slots.sh > "$SHORTCUT_PATH"

# –î–µ–ª–∞–µ–º —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
chmod +x "$SHORTCUT_PATH"

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —É—Å–ø–µ—à–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏
if [ -f "$SHORTCUT_PATH" ]; then
    echo "‚úÖ –Ø—Ä–ª—ã–∫ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω!"
    echo ""
    echo "üìç –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ: $SHORTCUT_PATH"
    echo "üìÇ –ü—É—Ç—å –∫ –ø—Ä–æ–µ–∫—Ç—É: $CURRENT_DIR"
    echo ""
    echo "üöÄ –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ:"
    echo "   ‚Ä¢ –î–≤–∞–∂–¥—ã –∫–ª–∏–∫–Ω—É—Ç—å –ø–æ —è—Ä–ª—ã–∫—É –Ω–∞ —Ä–∞–±–æ—á–µ–º —Å—Ç–æ–ª–µ"
    echo "   ‚Ä¢ –ò–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∏–∑ –¢–µ—Ä–º–∏–Ω–∞–ª–∞: open '$SHORTCUT_PATH'"
    echo ""
    echo "üí° –Ø—Ä–ª—ã–∫ –±—É–¥–µ—Ç:"
    echo "   ‚Ä¢ –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å–≤–æ–±–æ–¥–Ω—ã–µ —Å–ª–æ—Ç—ã –¥–ª—è –≤—Å—Ç—Ä–µ—á"
    echo "   ‚Ä¢ –ù–∞—á–∏–Ω–∞—è —Å —Ç–µ–∫—É—â–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ 2 –Ω–µ–¥–µ–ª–∏ –≤–ø–µ—Ä–µ–¥"
    echo "   ‚Ä¢ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∫–∞–ª–µ–Ω–¥–∞—Ä—é"
    echo ""
    echo "‚ö†Ô∏è  –í–∞–∂–Ω–æ: –ù–µ –ø–µ—Ä–µ–º–µ—â–∞–π—Ç–µ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞ $CURRENT_DIR"
    echo "   –∏–Ω–∞—á–µ —è—Ä–ª—ã–∫ –ø–µ—Ä–µ—Å—Ç–∞–Ω–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å"
else
    echo "‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —è—Ä–ª—ã–∫–∞"
    exit 1
fi

# –°–ø—Ä–∞—à–∏–≤–∞–µ–º, —Ö–æ—Ç–∏–º –ª–∏ –º—ã –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —è—Ä–ª—ã–∫
echo ""
read -p "üß™ –•–æ—Ç–∏—Ç–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —è—Ä–ª—ã–∫ —Å–µ–π—á–∞—Å? (y/n): " -n 1 -r
echo
if [[ $REPLY =~ ^[Yy]$ ]]; then
    echo "üîÑ –ó–∞–ø—É—Å–∫–∞—é —è—Ä–ª—ã–∫..."
    echo ""
    open "$SHORTCUT_PATH"
fi

echo ""
echo "üéâ –ì–æ—Ç–æ–≤–æ! –Ø—Ä–ª—ã–∫ —Ä–∞–∑–º–µ—â–µ–Ω –Ω–∞ —Ä–∞–±–æ—á–µ–º —Å—Ç–æ–ª–µ" 